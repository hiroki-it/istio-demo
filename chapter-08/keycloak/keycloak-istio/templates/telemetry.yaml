apiVersion: telemetry.istio.io/v1
kind: Telemetry
metadata:
  name: {{ .Release.Namespace }}
spec:
  accessLogging:
    - match:
        mode: SERVER
      providers:
        - name: envoy-inbound-stdout
    - match:
        mode: CLIENT
      providers:
        - name: envoy-outbound-stdout
  metrics:
    - providers:
        - name: prometheus
      overrides:
        - tagOverrides:
            system_name:
              value: istio-demo
            system_environment:
              value: dev
  tracing:
    - providers:
        - name: opentelemetry-grpc
      randomSamplingPercentage: 100
      customTags:
        http.url.path:
          header:
            name: :path
            defaultValue: unknown
        system.name:
          literal:
            value: istio-demo
        system.namespace:
          literal:
            value: {{ .Release.Namespace }}
        system.environment:
          literal:
            value: dev
