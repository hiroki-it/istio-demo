grafana.ini:
  auth.anonymous:
    enabled: true
    org_role: Admin
  date_formats:
    default_timezone: Asia/Tokyo
  users:
    default_theme: light

replicas: 2

service:
  type: NodePort
  nodePort: 32003

datasources:
  datasources.yaml:
    apiVersion: 1
    datasources:
      - name: Prometheus
        type: prometheus
        url: http://prometheus-server.prometheus.svc.cluster.local:9090
        isDefault: true

dashboards:
  local:
    kubernetes-deployment-hardware-resources:
      json: '{ "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "grafana", "uid": "-- Grafana --" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ] }, "description": "Kubernetes DeploymentのCPUやメモリを可視化する", "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 1, "links": [], "panels": [ { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 48, "panels": [], "title": "CPU", "type": "row" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "CPU使用率", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": true, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 1 }, "id": 45, "options": { "legend": { "calcs": [ "mean", "lastNotNull" ], "displayMode": "table", "placement": "right", "showLegend": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "uid": "$datasource" }, "editorMode": "code", "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\",pod=~\"^$Deployment.*$\", namespace=~\"$Namespace\"}[1m])) by (pod) / sum(kube_pod_container_resource_limits{resource=\"cpu\", container!=\"POD\", pod=~\"^$Deployment.*$\", namespace=~\"$Namespace\"}) by (pod) * 100", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "pod: {{ pod }}", "metric": "container_cpu", "range": true, "refId": "A", "step": 10 } ], "title": "Pod単位のCPU使用率 (実際値/limits)", "type": "timeseries" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "CPU使用率", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": true, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 8 }, "id": 46, "options": { "legend": { "calcs": [ "mean" ], "displayMode": "table", "placement": "right", "showLegend": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "uid": "$datasource" }, "editorMode": "code", "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\",pod=~\"^$Deployment.*$\", namespace=~\"$Namespace\"}[1m])) by (container) / sum(kube_pod_container_resource_limits{resource=\"cpu\", container!=\"POD\", pod=~\"^$Deployment.*$\", namespace=~\"$Namespace\"}) by (container) * 100", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "container: {{ container }}", "metric": "container_cpu", "range": true, "refId": "A", "step": 10 } ], "title": "コンテナ単位のCPU使用率 (実際値/limits)", "type": "timeseries" }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 15 }, "id": 47, "panels": [], "title": "メモリ", "type": "row" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "メモリ使用率", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": true, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 16 }, "id": 25, "options": { "legend": { "calcs": [ "mean", "lastNotNull" ], "displayMode": "table", "placement": "right", "showLegend": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "uid": "$datasource" }, "expr": "sum (container_memory_working_set_bytes{image!=\"\", container!=\"POD\", pod=~\"^$Deployment.*$\", namespace=~\"$Namespace\"}) by (pod) / sum(kube_pod_container_resource_limits{resource=\"memory\", container!=\"POD\", pod=~\"^$Deployment.*$\", namespace=~\"$Namespace\"}) by (pod) * 100", "interval": "10s", "intervalFactor": 1, "legendFormat": "pod: {{ pod }}", "metric": "container_memory_usage:sort_desc", "refId": "A", "step": 10 } ], "title": "Pod単位のメモリ使用率 (実際値/limits)", "type": "timeseries" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "メモリ使用率", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": true, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 23 }, "id": 44, "options": { "legend": { "calcs": [ "mean", "lastNotNull" ], "displayMode": "table", "placement": "right", "showLegend": true, "sortBy": "Name", "sortDesc": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "uid": "$datasource" }, "editorMode": "code", "expr": "sum (container_memory_working_set_bytes{image!=\"\", container!=\"POD\", pod=~\"^$Deployment.*$\", namespace=~\"$Namespace\"}) by (container) / sum(kube_pod_container_resource_limits{resource=\"memory\", container!=\"POD\", pod=~\"^$Deployment.*$\", namespace=~\"$Namespace\"}) by (container) * 100", "interval": "10s", "intervalFactor": 1, "legendFormat": "container: {{ container }}", "metric": "container_memory_usage:sort_desc", "range": true, "refId": "A", "step": 10 } ], "title": "コンテナ単位のメモリ使用率 (実際値/limits)", "type": "timeseries" } ], "preload": false, "refresh": "10s", "schemaVersion": 40, "tags": [ "kubernetes" ], "templating": { "list": [ { "current": { "text": "default", "value": "default" }, "label": "Data Source", "name": "datasource", "options": [], "query": "prometheus", "refresh": 1, "regex": "", "type": "datasource" }, { "allValue": ".*", "current": {}, "datasource": "$datasource", "includeAll": false, "name": "Namespace", "options": [], "query": "label_values(kube_deployment_created, namespace)", "refresh": 1, "type": "query" }, { "allValue": ".*", "current": {}, "datasource": "$datasource", "includeAll": false, "name": "Deployment", "options": [], "query": "label_values(kube_deployment_created{namespace=~\"$Namespace\"}, deployment)", "refresh": 1, "type": "query" }, { "allValue": ".*", "current": { "text": "All", "value": "$__all" }, "datasource": "$datasource", "includeAll": true, "name": "Node", "options": [], "query": "label_values(kube_pod_info, node)", "refresh": 1, "type": "query" } ] }, "time": { "from": "now-30m", "to": "now" }, "timepicker": {}, "timezone": "", "title": "Kubernetes Deployment (CPU、メモリ)", "uid": "fefwgxl0fdm2od", "version": 1, "weekStart": "" }'
    kubernetes-statefulset-hardware-resources:
      json: '{ "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "grafana", "uid": "-- Grafana --" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ] }, "description": "Kubernetes StatefulSetのCPUやメモリを可視化する", "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 2, "links": [], "panels": [ { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 48, "panels": [], "title": "CPU", "type": "row" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "CPU使用率", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": true, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 1 }, "id": 45, "options": { "legend": { "calcs": [ "mean", "lastNotNull" ], "displayMode": "table", "placement": "right", "showLegend": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "uid": "$datasource" }, "editorMode": "code", "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\",pod=~\"^$StatefulSet.*$\", namespace=~\"$Namespace\"}[1m])) by (pod) / sum(kube_pod_container_resource_limits{resource=\"cpu\", container!=\"POD\", pod=~\"^$StatefulSet.*$\", namespace=~\"$Namespace\"}) by (pod) * 100", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "pod: {{ pod }}", "metric": "container_cpu", "range": true, "refId": "A", "step": 10 } ], "title": "Pod単位のCPU使用率 (実際値/limits)", "type": "timeseries" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "CPU使用率", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": true, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 8 }, "id": 46, "options": { "legend": { "calcs": [ "mean" ], "displayMode": "table", "placement": "right", "showLegend": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "uid": "$datasource" }, "editorMode": "code", "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\", container!=\"POD\",pod=~\"^$StatefulSet.*$\", namespace=~\"$Namespace\"}[1m])) by (container) / sum(kube_pod_container_resource_limits{resource=\"cpu\", container!=\"POD\", pod=~\"^$StatefulSet.*$\", namespace=~\"$Namespace\"}) by (container) * 100", "hide": false, "interval": "10s", "intervalFactor": 1, "legendFormat": "container: {{ container }}", "metric": "container_cpu", "range": true, "refId": "A", "step": 10 } ], "title": "コンテナ単位のCPU使用率 (実際値/limits)", "type": "timeseries" }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 15 }, "id": 47, "panels": [], "title": "メモリ", "type": "row" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "メモリ使用率", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": true, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 16 }, "id": 25, "options": { "legend": { "calcs": [ "mean", "lastNotNull" ], "displayMode": "table", "placement": "right", "showLegend": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "uid": "$datasource" }, "expr": "sum (container_memory_working_set_bytes{image!=\"\", container!=\"POD\", pod=~\"^$StatefulSet.*$\", namespace=~\"$Namespace\"}) by (pod) / sum(kube_pod_container_resource_limits{resource=\"memory\", container!=\"POD\", pod=~\"^$StatefulSet.*$\", namespace=~\"$Namespace\"}) by (pod) * 100", "interval": "10s", "intervalFactor": 1, "legendFormat": "pod: {{ pod }}", "metric": "container_memory_usage:sort_desc", "refId": "A", "step": 10 } ], "title": "Pod単位のメモリ使用率 (実際値/limits)", "type": "timeseries" }, { "datasource": { "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "メモリ使用率", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": true, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 23 }, "id": 44, "options": { "legend": { "calcs": [ "mean", "lastNotNull" ], "displayMode": "table", "placement": "right", "showLegend": true, "sortBy": "Name", "sortDesc": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "uid": "$datasource" }, "editorMode": "code", "expr": "sum (container_memory_working_set_bytes{image!=\"\", container!=\"POD\", pod=~\"^$StatefulSet.*$\", namespace=~\"$Namespace\"}) by (container) / sum(kube_pod_container_resource_limits{resource=\"memory\", container!=\"POD\", pod=~\"^$StatefulSet.*$\", namespace=~\"$Namespace\"}) by (container) * 100", "interval": "10s", "intervalFactor": 1, "legendFormat": "container: {{ container }}", "metric": "container_memory_usage:sort_desc", "range": true, "refId": "A", "step": 10 } ], "title": "コンテナ単位のメモリ使用率 (実際値/limits)", "type": "timeseries" } ], "preload": false, "refresh": "10s", "schemaVersion": 40, "tags": [ "kubernetes" ], "templating": { "list": [ { "current": { "text": "default", "value": "default" }, "label": "Data Source", "name": "datasource", "options": [], "query": "prometheus", "refresh": 1, "regex": "", "type": "datasource" }, { "allValue": ".*", "current": {}, "datasource": "$datasource", "includeAll": false, "name": "Namespace", "options": [], "query": "label_values(kube_statefulset_created, namespace)", "refresh": 1, "type": "query" }, { "allValue": ".*", "current": {}, "datasource": "$datasource", "includeAll": false, "name": "StatefulSet", "options": [], "query": "label_values(kube_statefulset_created{namespace=~\"$Namespace\"}, statefulset)", "refresh": 1, "type": "query" }, { "allValue": ".*", "current": { "text": "All", "value": "$__all" }, "datasource": "$datasource", "includeAll": true, "name": "Node", "options": [], "query": "label_values(kube_pod_info, node)", "refresh": 1, "type": "query" } ] }, "time": { "from": "now-30m", "to": "now" }, "timepicker": {}, "timezone": "", "title": "Kubernetes StatefulSet (CPU、メモリ)", "uid": "fefwgxldvtx4wd", "version": 1, "weekStart": "" }'
    istio-service-mesh-traffic:
      json: '{ "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "grafana", "uid": "-- Grafana --" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ] }, "description": "Istioサービスメッシュのネットワークを可視化する", "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 1, "id": 1, "links": [], "panels": [ { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 8, "panels": [], "title": "リクエスト数", "type": "row" }, { "datasource": { "type": "datasource", "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "blue", "mode": "fixed" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "reqps" }, "overrides": [ { "__systemRef": "hideSeriesFrom", "matcher": { "id": "byNames", "options": { "mode": "exclude", "names": [ "Source Workload" ], "prefix": "All except:", "readOnly": true } }, "properties": [ { "id": "custom.hideFrom", "value": { "legend": false, "tooltip": false, "viz": true } } ] } ] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 1 }, "id": 2, "interval": "5s", "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": false }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "$datasource" }, "editorMode": "code", "expr": "round(sum (rate(istio_requests_total{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\"}[$__rate_interval])), 0.01)", "legendFormat": "Source Workload", "range": true, "refId": "A" } ], "title": "合計リクエスト送信数/秒", "type": "timeseries" }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 8 }, "id": 7, "panels": [], "title": "レスポンスタイム", "type": "row" }, { "datasource": { "type": "datasource", "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "blue", "mode": "fixed" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "reqps" }, "overrides": [ { "__systemRef": "hideSeriesFrom", "matcher": { "id": "byNames", "options": { "mode": "exclude", "names": [ "Source Workload" ], "prefix": "All except:", "readOnly": true } }, "properties": [ { "id": "custom.hideFrom", "value": { "legend": false, "tooltip": false, "viz": true } } ] } ] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 9 }, "id": 9, "interval": "5s", "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "$datasource" }, "editorMode": "code", "expr": "rate(istio_request_duration_milliseconds_sum{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\"}[1m]) / rate(istio_request_duration_milliseconds_count{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\"}[1m])", "legendFormat": "{{ pod }}", "range": true, "refId": "A" } ], "title": "平均レスポンスタイム", "type": "timeseries" }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 16 }, "id": 6, "panels": [], "title": "ステータスコード", "type": "row" }, { "datasource": { "type": "datasource", "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "blue", "mode": "fixed" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 17 }, "id": 3, "interval": "5s", "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": false }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "$datasource" }, "editorMode": "code", "expr": "round(sum (rate(istio_requests_total{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\",response_code!=\"4..\", response_code!=\"5..\"}[$__rate_interval])) / sum (rate(istio_requests_total{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\"}[$__rate_interval])) * 100, 0.01)or vector(0)", "legendFormat": "Source Workload", "range": true, "refId": "A" } ], "title": "2xxステータス受信率 (2xx/全ステータス)", "type": "timeseries" }, { "datasource": { "type": "datasource", "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "blue", "mode": "fixed" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 24 }, "id": 4, "interval": "5s", "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": false }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "$datasource" }, "editorMode": "code", "expr": "round(sum (rate(istio_requests_total{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\",response_code=~\"4..\"}[$__rate_interval])) / sum (rate(istio_requests_total{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\"}[$__rate_interval])) * 100, 0.01)or vector(0)", "format": "time_series", "interval": "", "legendFormat": "Source Workload", "range": true, "refId": "A" } ], "title": "4xxステータス受信率 (4xx/全ステータス)", "type": "timeseries" }, { "datasource": { "type": "datasource", "uid": "$datasource" }, "fieldConfig": { "defaults": { "color": { "fixedColor": "blue", "mode": "fixed" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "reqps" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 31 }, "id": 5, "interval": "5s", "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": false }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "$datasource" }, "editorMode": "code", "expr": "round(sum (rate(istio_requests_total{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\",response_code=~\"5..\"}[$__rate_interval])) / sum (rate(istio_requests_total{source_workload=~\"$Source\",source_workload_namespace=~\"$Namespace\", reporter=~\"source|waypoint\"}[$__rate_interval])) * 100, 0.01)or vector(0)", "legendFormat": "Source Workload", "range": true, "refId": "A" } ], "title": "5xxステータス受信率 (5xx/全ステータス)", "type": "timeseries" } ], "preload": false, "refresh": "10s", "schemaVersion": 40, "tags": [ "istio" ], "templating": { "list": [ { "current": { "text": "Prometheus", "value": "PBFA97CFB590B2093" }, "label": "Data Source", "name": "datasource", "options": [], "query": "prometheus", "refresh": 1, "regex": "", "type": "datasource" }, { "allValue": ".*", "current": {}, "datasource": "$datasource", "includeAll": false, "label": "Source Namespace", "name": "Namespace", "options": [], "query": { "qryType": 1, "query": "label_values(istio_requests_total{reporter=~\"source|waypoint\"},source_workload_namespace)", "refId": "PrometheusVariableQueryEditor-VariableQuery" }, "refresh": 1, "type": "query" }, { "allValue": ".*", "current": {}, "datasource": "$datasource", "includeAll": false, "label": "Source Workload", "name": "Source", "options": [], "query": { "qryType": 1, "query": "label_values(istio_requests_total{reporter=~\"source|waypoint\", source_workload_namespace=~\"$Namespace\"},source_workload)", "refId": "PrometheusVariableQueryEditor-VariableQuery" }, "refresh": 1, "type": "query" } ] }, "time": { "from": "now-24h", "to": "now" }, "timepicker": {}, "timezone": "utc", "title": "Istioサービスメッシュ (トラフィック管理)", "uid": "feetb2l7s04qoa", "version": 1, "weekStart": "" }'
    istio-service-mesh-resiliency:
      json: '{ "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "grafana", "uid": "-- Grafana --" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": { "limit": 100, "matchAny": false, "tags": [], "type": "dashboard" }, "type": "dashboard" } ] }, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 1, "links": [], "panels": [ { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 28, "panels": [], "title": "リトライ", "type": "row" }, { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "max": 100, "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 1 }, "id": 30, "options": { "legend": { "calcs": [ "mean" ], "displayMode": "table", "placement": "bottom", "showLegend": true, "sortBy": "Mean", "sortDesc": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "editorMode": "code", "expr": "sum(envoy_cluster_membership_healthy{pod=~\"^$Source.*$\",namespace=~\"$Namespace\", cluster_name=~\".*$DestinationVersion.*\"}) by (pod, cluster_name) / sum(envoy_cluster_membership_total{pod=~\"^$Source.*$\",namespace=~\"$Namespace\", cluster_name=~\".*$DestinationVersion.*\"}) by (pod, cluster_name) * 100", "hide": false, "legendFormat": "{{ pod }} ➡︎ {{ cluster_name }}", "range": true, "refId": "A" } ], "title": "宛先の正常率", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 8 }, "id": 22, "options": { "legend": { "calcs": [ "mean" ], "displayMode": "table", "placement": "bottom", "showLegend": true, "sortBy": "Mean", "sortDesc": true }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "disableTextWrap": false, "editorMode": "code", "expr": "sum(rate(envoy_cluster_upstream_rq_retry{pod=~\"^$Source.*$\",namespace=~\"$Namespace\", cluster_name=~\".*$DestinationVersion.*\"}[5m])) by (pod,cluster_name)", "fullMetaSearch": false, "hide": false, "includeNullMetadata": true, "legendFormat": "{{ pod }} ➡︎ {{ cluster_name }}", "range": true, "refId": "A", "useBackend": false } ], "title": "全リトライ数", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "always", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "max": 100, "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "percent" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 15 }, "id": 23, "options": { "legend": { "calcs": [ "mean" ], "displayMode": "table", "placement": "bottom", "showLegend": true, "sortBy": "Mean", "sortDesc": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "editorMode": "code", "expr": "sum(rate(envoy_cluster_upstream_rq_retry_success{pod=~\"^$Source.*$\",namespace=~\"$Namespace\", cluster_name=~\".*$DestinationVersion.*\"}[5m])) by (pod,cluster_name) / sum(rate(envoy_cluster_upstream_rq_retry{pod=~\"^$Source.*$\",namespace=~\"$Namespace\", cluster_name=~\".*$DestinationVersion.*\"}[5m]))  by (pod,cluster_name) * 100", "hide": false, "legendFormat": "{{ pod }} ➡︎ {{ cluster_name }}", "range": true, "refId": "B" } ], "title": "リトライ成功率 (成功数/全リトライ数)", "type": "timeseries" }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 22 }, "id": 29, "panels": [], "title": "タイムアウト", "type": "row" }, { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "reqpm" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 23 }, "id": 25, "options": { "legend": { "calcs": [ "mean" ], "displayMode": "table", "placement": "bottom", "showLegend": true, "sortBy": "Mean", "sortDesc": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "editorMode": "code", "expr": "sum(rate(envoy_cluster_upstream_rq_timeout{pod=~\"^$Source.*$\",namespace=~\"$Namespace\", cluster_name=~\".*$DestinationVersion.*\"}[5m])) by (pod,cluster_name)* 60", "hide": false, "legendFormat": "{{ pod }} ➡︎ {{ cluster_name }}", "range": true, "refId": "D" } ], "title": "読み取りタイムアウトになったリクエスト数/分", "type": "timeseries" }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 30 }, "id": 27, "panels": [], "title": "サーキットブレイカー", "type": "row" }, { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 31 }, "id": 24, "options": { "legend": { "calcs": [ "mean" ], "displayMode": "table", "placement": "bottom", "showLegend": true, "sortBy": "Mean", "sortDesc": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "editorMode": "code", "expr": "sum(rate(envoy_cluster_outlier_detection_ejections_active{pod=~\"^$Source.*$\",namespace=~\"$Namespace\", cluster_name=~\".*$DestinationVersion.*\"}[5m])) by (pod,cluster_name)", "hide": false, "legendFormat": "{{ pod }} ➡︎ {{ cluster_name }}", "range": true, "refId": "C" } ], "title": "サーキットブレイカー起動数", "type": "timeseries" }, { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 38 }, "id": 26, "options": { "legend": { "calcs": [ "mean" ], "displayMode": "table", "placement": "bottom", "showLegend": true, "sortBy": "Mean", "sortDesc": true, "width": 400 }, "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" } }, "pluginVersion": "11.5.2", "targets": [ { "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" }, "editorMode": "code", "expr": "sum(rate(envoy_cluster_upstream_rq_pending_overflow{pod=~\"^$Source.*$\",namespace=~\"$Namespace\", cluster_name=~\".*$DestinationVersion.*\"}[5m])) by (pod,cluster_name)", "hide": false, "legendFormat": "{{ pod }} ➡︎ {{ cluster_name }}", "range": true, "refId": "C" } ], "title": "遮断したリクエスト数", "type": "timeseries" } ], "preload": false, "refresh": "5s", "schemaVersion": 40, "tags": [ "istio" ], "templating": { "list": [ { "current": { "text": "Prometheus", "value": "PBFA97CFB590B2093" }, "label": "Data Source", "name": "datasource", "options": [], "query": "prometheus", "refresh": 1, "regex": "", "type": "datasource" }, { "current": {}, "datasource": { "type": "prometheus", "uid": "${datasource}" }, "definition": "label_values(istio_requests_total{reporter=~\"source|waypoint\"},source_workload_namespace)", "label": "Source Namespace", "name": "Namespace", "options": [], "query": { "qryType": 1, "query": "label_values(istio_requests_total{reporter=~\"source|waypoint\"},source_workload_namespace)", "refId": "PrometheusVariableQueryEditor-VariableQuery" }, "refresh": 1, "regex": "", "type": "query" }, { "current": {}, "datasource": { "type": "prometheus", "uid": "${datasource}" }, "definition": "label_values(istio_requests_total{reporter=~\"source|waypoint\", source_workload_namespace=~\"$Namespace\"},source_workload)", "label": "Source Workload", "name": "Source", "options": [], "query": { "qryType": 1, "query": "label_values(istio_requests_total{reporter=~\"source|waypoint\", source_workload_namespace=~\"$Namespace\"},source_workload)", "refId": "PrometheusVariableQueryEditor-VariableQuery" }, "refresh": 1, "regex": "", "type": "query" }, { "current": { "text": "xds-grpc", "value": "xds-grpc" }, "definition": "label_values(istio_requests_total{reporter=~\"source|waypoint\", source_workload_namespace=~\"$Namespace\", source_workload=~\"$Source\"},destination_workload)", "label": "Destination Workload", "name": "Destination", "options": [], "query": { "qryType": 1, "query": "label_values(istio_requests_total{reporter=~\"source|waypoint\", source_workload_namespace=~\"$Namespace\", source_workload=~\"$Source\"},destination_workload)", "refId": "PrometheusVariableQueryEditor-VariableQuery" }, "refresh": 1, "regex": "", "type": "query" }, { "current": { "text": "v-delayed-7s-delay", "value": "v-delayed-7s-delay" }, "definition": "label_values(istio_requests_total{reporter=~\"source|waypoint\", source_workload_namespace=~\"$Namespace\", source_workload=~\"$Source\", destination_workload=\"$Destination\"},destination_version)", "hide": 2, "label": "Destination Version", "name": "DestinationVersion", "options": [], "query": { "qryType": 1, "query": "label_values(istio_requests_total{reporter=~\"source|waypoint\", source_workload_namespace=~\"$Namespace\", source_workload=~\"$Source\", destination_workload=\"$Destination\"},destination_version)", "refId": "PrometheusVariableQueryEditor-VariableQuery" }, "refresh": 1, "regex": "", "type": "query" } ] }, "time": { "from": "now-15m", "to": "now" }, "timepicker": {}, "timezone": "", "title": "Istioサービスメッシュ (回復性管理)", "uid": "drxHAfr7k2", "version": 1, "weekStart": "" }'
      
dashboardProviders:
  dasboardproviders.yaml:
    apiVersion: 1
    providers:
      - name: local
        options:
          path: /var/lib/grafana/dashboards/local

resources:
  requests:
    cpu: 300m
    memory: 256Mi
  limits:
    cpu: 300m
    memory: 256Mi
