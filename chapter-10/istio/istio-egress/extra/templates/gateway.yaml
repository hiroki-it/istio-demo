apiVersion: networking.istio.io/v1
kind: Gateway
metadata:
  name: {{ .Values.service.name }}-database
spec:
  selector:
    istio: egressgateway
  servers:
    - port:
        name: mysql
        protocol: MYSQL
        number: 3306
      hosts:
        - "*"
---
apiVersion: networking.istio.io/v1
kind: Gateway
metadata:
  name: {{ .Values.service.name }}-googleapis
spec:
  selector:
    istio: egressgateway
  servers:
    - port:
        name: tls
        protocol: TLS
        number: 443
      hosts:
        - www.googleapis.com
      tls:
        mode: PASSTHROUGH
---
apiVersion: networking.istio.io/v1
kind: Gateway
metadata:
  name: {{ .Values.service.name }}-grafana-tempo
spec:
  selector:
    istio: egressgateway
  servers:
    - port:
        name: grpc
        protocol: GRPC
        number: 4317
      hosts:
        - grafana-tempo.grafana-tempo.svc.cluster.local
