affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: node.kubernetes.io/nodegroup
              operator: In
              values:
                - system

global:
  tag: 1.24.2
  imagePullPolicy: IfNotPresent

meshConfig:
  defaultConfig:
    holdApplicationUntilProxyStarts: true
  enableTracing: true
  defaultProviders:
    metrics:
      - prometheus
    tracing:
      - opentelemetry-grpc
  extensionProviders:
    - name: opentelemetry-grpc
      opentelemetry:
        service: opentelemetry-collector.agent.svc.cluster.local
        port: 4317
    - name: envoy-grpc
      envoyFileAccessLog:
        logFormat:
          labels:
            trace_id: "%REQ(x-b3-traceid)%"
            x_request_id: "%REQ(X-REQUEST-ID)%"
            start_time: "%START_TIME%"
            request_line: "%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)% %PROTOCOL%"
            response_code: "%RESPONSE_CODE%"
            response_flags: "%RESPONSE_FLAGS%"
            response_code_details: "%RESPONSE_CODE_DETAILS%"
            connection_termination_details: "%CONNECTION_TERMINATION_DETAILS%"
            upstream_transport_failure_reason: "%UPSTREAM_TRANSPORT_FAILURE_REASON%"
            bytes_received: "%BYTES_RECEIVED%"
            bytes_sent: "%BYTES_SENT%"
            duration: "%DURATION%"
            x_envoy_upstream_service_time: "%RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)%"
            x_forwarded_for: "%REQ(X-FORWARDED-FOR)%"
            user_agent: "%REQ(USER-AGENT)%"
            authority: "%REQ(:AUTHORITY)%"
            upstream_host: "%UPSTREAM_HOST%"
            upstream_cluster: "%UPSTREAM_CLUSTER%"
            upstream_local_address: "%UPSTREAM_LOCAL_ADDRESS%"
            downstream_local_address: "%DOWNSTREAM_LOCAL_ADDRESS%"
            downstream_remote_address: "%DOWNSTREAM_REMOTE_ADDRESS%"
            requested_server_name: "%REQUESTED_SERVER_NAME%"
            route_name: "%ROUTE_NAME%"
  rootNamespace: null
  discoverySelectors:
    - matchLabels:
        istio.io/rev: stable
  outboundTrafficPolicy:
    mode: REGISTRY_ONLY

revision: 1-24-2

revisionTags:
  - stable
